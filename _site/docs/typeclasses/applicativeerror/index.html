<h2 id="applicativeerror">ApplicativeError</h2>

<p>ApplicativeError is the typeclase used to explicitly represent errors during independent computations.
It is parametrized to an error type <code class="highlighter-rouge">E</code>, which means the datatype has at least a “success” and a “failure” version.</p>

<p>These errors can come in the form of <code class="highlighter-rouge">Throwable</code>, <code class="highlighter-rouge">Exception</code>, or any other type that is more relevant to the domain;
like for example a sealed class UserNotFoundReason that contains 3 inheritors.</p>

<p>Some of the datatypes Λrrow provides can have these error types already fixed.
That’s the case of <a href="/docs/datatypes/try"><code class="highlighter-rouge">Try&lt;A&gt;</code></a>, which has its error type fixed to <code class="highlighter-rouge">Throwable</code>.
Other datatypes like <a href="/docs/datatypes/either"><code class="highlighter-rouge">Either&lt;E, A&gt;</code></a> allow for the user to apply their error type of choice.</p>

<h3 id="main-combinators">Main Combinators</h3>

<p><code class="highlighter-rouge">ApplicativeError</code> inherits all the combinators available in <a href="/docs/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a>. It also adds several of its own.</p>

<h4 id="raiseerror">raiseError</h4>

<p>A constructor function. It lifts an exception into the computational context of a type constructor.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.*</span>
<span class="k">import</span> <span class="nn">arrow.core.*</span>

<span class="n">Either</span><span class="p">.</span><span class="n">applicativeError</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">&gt;().</span><span class="n">raiseError</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">"Paco"</span><span class="p">))</span>
<span class="c1">// Left(a=java.lang.RuntimeException: Paco)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.data.*</span>

<span class="n">Try</span><span class="p">.</span><span class="n">applicativeError</span><span class="p">().</span><span class="n">raiseError</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">"Paco"</span><span class="p">))</span>
<span class="c1">// Failure(exception=java.lang.RuntimeException: Paco)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.effects.*</span>

<span class="n">IO</span><span class="p">.</span><span class="n">applicativeError</span><span class="p">().</span><span class="n">raiseError</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">"Paco"</span><span class="p">))</span>
<span class="c1">// RaiseError(exception=java.lang.RuntimeException: Paco)</span>
</code></pre></div></div>

<h4 id="kindf-ahandleerrorwith">Kind&lt;F, A&gt;#handleErrorWith</h4>

<p>This method requires a function that creates a new datatype from an error, <code class="highlighter-rouge">(E) -&gt; Kind&lt;F, A&gt;</code>. This function is used as a catch + recover clause for the current instance, allowing it to return a new computation after a failure.</p>

<p>If <a href="/docs/typeclasses/monad"><code class="highlighter-rouge">Monad</code></a> has <code class="highlighter-rouge">flatMap</code> to allow mapping the value inside a <em>successful</em> datatype into a new datatype, you can think of <code class="highlighter-rouge">handleErrorWith</code> as a way that allows you to map the value of a *failed datatype into a new datatype.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">AE_EITHER</span> <span class="p">=</span> <span class="n">Either</span><span class="p">.</span><span class="n">applicativeError</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">&gt;()</span>

<span class="kd">val</span> <span class="py">success</span><span class="p">:</span> <span class="n">Either</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">,</span> <span class="n">Int</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">Either</span><span class="p">.</span><span class="n">Right</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

<span class="n">AE_EITHER</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">success</span><span class="p">.</span><span class="n">handleErrorWith</span> <span class="p">{</span> <span class="n">t</span> <span class="p">-&gt;</span> <span class="n">Either</span><span class="p">.</span><span class="n">Right</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
<span class="c1">// Right(b=1)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">failure</span><span class="p">:</span> <span class="n">Either</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">,</span> <span class="n">Int</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">Either</span><span class="p">.</span><span class="n">Left</span><span class="p">(</span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">"Boom!"</span><span class="p">))</span>

<span class="n">AE_EITHER</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">failure</span><span class="p">.</span><span class="n">handleErrorWith</span> <span class="p">{</span> <span class="n">t</span> <span class="p">-&gt;</span> <span class="n">Either</span><span class="p">.</span><span class="n">Right</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
<span class="c1">// Right(b=0)</span>
</code></pre></div></div>

<h4 id="kindf-ahandleerror">Kind&lt;F, A&gt;#handleError</h4>

<p>Similar to <code class="highlighter-rouge">handleErrorWith</code>, except the function can return any regular value. This value will be wrapped and used as a return.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_EITHER</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">success</span><span class="p">.</span><span class="n">handleError</span> <span class="p">{</span> <span class="n">t</span> <span class="p">-&gt;</span> <span class="m">0</span> <span class="p">}</span> <span class="p">}</span>
<span class="c1">// Right(b=1)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_EITHER</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">failure</span><span class="p">.</span><span class="n">handleError</span> <span class="p">{</span> <span class="n">t</span> <span class="p">-&gt;</span> <span class="m">0</span> <span class="p">}</span> <span class="p">}</span>
<span class="c1">// Right(b=0)</span>
</code></pre></div></div>

<h4 id="kindf-aattempt">Kind&lt;F, A&gt;#attempt</h4>

<p>Maps the current content of the datatype to an <a href="/docs/datatypes/either"><code class="highlighter-rouge">Either&lt;E, A&gt;</code></a>, recovering from any previous error state.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">AE_TRY</span> <span class="p">=</span> <span class="n">Try</span><span class="p">.</span><span class="n">applicativeError</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_TRY</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">Try</span> <span class="p">{</span> <span class="s">"3"</span><span class="p">.</span><span class="n">toInt</span><span class="p">()</span> <span class="p">}.</span><span class="n">attempt</span><span class="p">()</span> <span class="p">}</span>
<span class="c1">// Success(value=Right(b=3))</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_TRY</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">Try</span> <span class="p">{</span> <span class="s">"nope"</span><span class="p">.</span><span class="n">toInt</span><span class="p">()</span> <span class="p">}.</span><span class="n">attempt</span><span class="p">()</span> <span class="p">}</span>
<span class="c1">// Success(value=Left(a=java.lang.NumberFormatException: For input string: "nope"))</span>
</code></pre></div></div>

<h4 id="fromeither">fromEither</h4>

<p>Constructor function from an <a href="/docs/datatypes/either"><code class="highlighter-rouge">Either&lt;E, A&gt;</code></a> to the current datatype.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_TRY</span><span class="p">.</span><span class="n">fromEither</span><span class="p">(</span><span class="n">Either</span><span class="p">.</span><span class="n">Right</span><span class="p">(</span><span class="m">1</span><span class="p">))</span>
<span class="c1">// Success(value=1)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_TRY</span><span class="p">.</span><span class="n">fromEither</span><span class="p">(</span><span class="n">Either</span><span class="p">.</span><span class="n">Left</span><span class="p">(</span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">"Boom"</span><span class="p">)))</span>
<span class="c1">// Failure(exception=java.lang.RuntimeException: Boom)</span>
</code></pre></div></div>

<h4 id="catch">catch</h4>

<p>Constructor function. It takes two function parameters. The first is a generator function from <code class="highlighter-rouge">() -&gt; A</code>. The second is an error mapping function from <code class="highlighter-rouge">(Throwable) -&gt; E</code>.
<code class="highlighter-rouge">catch()</code> runs the generator function to generate a success datatype, and if it throws an exception it uses the error mapping function to create a new failure datatype.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_EITHER</span><span class="p">.</span><span class="k">catch</span><span class="p">({</span> <span class="m">1</span> <span class="p">}</span> <span class="p">,</span><span class="o">::</span><span class="n">identity</span><span class="p">)</span>
<span class="c1">// Right(b=1)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AE_EITHER</span><span class="p">.</span><span class="k">catch</span><span class="p">({</span> <span class="k">throw</span> <span class="n">RuntimeException</span><span class="p">(</span><span class="s">"Boom"</span><span class="p">)</span> <span class="p">}</span> <span class="p">,</span><span class="o">::</span><span class="n">identity</span><span class="p">)</span>
<span class="c1">// Left(a=java.lang.RuntimeException: Boom)</span>
</code></pre></div></div>

<h3 id="laws">Laws</h3>

<p>Arrow provides <a href="/docs/typeclasses/laws#applicativeerrorlaws"><code class="highlighter-rouge">ApplicativeErrorLaws</code></a> in the form of test cases for internal verification of lawful instances and third party apps creating their own <code class="highlighter-rouge">ApplicativeError</code> instances.</p>

<h3 id="data-types">Data Types</h3>

<p>The following datatypes in Arrow provide instances that adhere to the <code class="highlighter-rouge">ApplicativeError</code> typeclass.</p>

<ul>
  <li><a href="/docs/datatypes/try">Try</a></li>
  <li><a href="/docs/datatypes/either">Either</a></li>
  <li><a href="/docs/datatypes/kleisli">Kleisli</a></li>
  <li><a href="/docs/datatypes/option">Option</a></li>
  <li><a href="/docs/datatypes/eithert">EitherT</a></li>
  <li><a href="/docs/datatypes/statet">StateT</a></li>
  <li><a href="/docs/effects/io">IO</a></li>
  <li><a href="/docs/integrations/rx2">ObservableK</a></li>
  <li><a href="/docs/integrations/rx2">FlowableK</a></li>
  <li><a href="/docs/integrations/kotlinxcoroutines/">DeferredK</a></li>
</ul>
