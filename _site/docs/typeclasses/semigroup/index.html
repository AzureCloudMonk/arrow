<h2 id="semigroup">Semigroup</h2>

<p>A semigroup for some given type <code class="highlighter-rouge">A</code> has a single operation (which we will call <code class="highlighter-rouge">combine</code>), which takes two values of type <code class="highlighter-rouge">A</code>, and returns a value of type <code class="highlighter-rouge">A</code>. This operation must be guaranteed to be associative. That is to say that:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">combine</span><span class="p">(</span><span class="n">b</span><span class="p">)).</span><span class="n">combine</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</code></pre></div></div>

<p>must be the same as</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="p">.</span><span class="n">combine</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">combine</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
</code></pre></div></div>

<p>for all possible values of a, b ,c.</p>

<p>There are instances of <code class="highlighter-rouge">Semigroup</code> defined for many types found in Arrow and the Kotlin std lib.
For example, <code class="highlighter-rouge">Int</code> values are combined using addition by default but multiplication is also associative and forms another <code class="highlighter-rouge">Semigroup</code>.</p>

<h3 id="examples">Examples</h3>

<p>Now that you’ve learned about the Semigroup instance for Int try to guess how it works in the following examples:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.*</span>
<span class="k">import</span> <span class="nn">arrow.typeclasses.*</span>
<span class="k">import</span> <span class="nn">arrow.instances.*</span>

<span class="n">Int</span><span class="p">.</span><span class="n">semigroup</span><span class="p">().</span><span class="n">run</span> <span class="p">{</span> <span class="m">1</span><span class="p">.</span><span class="n">combine</span><span class="p">(</span><span class="m">2</span><span class="p">)</span> <span class="p">}</span>
<span class="c1">// 3</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.data.*</span>

<span class="n">ListK</span><span class="p">.</span><span class="n">semigroup</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;().</span><span class="n">run</span> <span class="p">{</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">combine</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">).</span><span class="n">k</span><span class="p">())</span> <span class="p">}</span>
<span class="c1">// ListK(list=[1, 2, 3, 4, 5, 6])</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.core.*</span>

<span class="n">Option</span><span class="p">.</span><span class="n">monoid</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">Int</span><span class="p">.</span><span class="n">semigroup</span><span class="p">()).</span><span class="n">run</span> <span class="p">{</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">combine</span><span class="p">(</span><span class="n">Option</span><span class="p">(</span><span class="m">2</span><span class="p">))</span> <span class="p">}</span>
<span class="c1">// Some(3)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Option</span><span class="p">.</span><span class="n">monoid</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">Int</span><span class="p">.</span><span class="n">semigroup</span><span class="p">()).</span><span class="n">run</span> <span class="p">{</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">combine</span><span class="p">(</span><span class="n">None</span><span class="p">)</span> <span class="p">}</span>
<span class="c1">// None</span>
</code></pre></div></div>

<p>Many of these types have methods defined directly on them, which allow for such combining, e.g. <code class="highlighter-rouge">+</code> on <code class="highlighter-rouge">List</code>, but the value of having a <code class="highlighter-rouge">Semigroup</code> typeclass available is that these compose.</p>

<p>Additionaly <code class="highlighter-rouge">Semigroup</code> adds <code class="highlighter-rouge">+</code> syntax to all types for which a Semigroup instance exists:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Option</span><span class="p">.</span><span class="n">monoid</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">Int</span><span class="p">.</span><span class="n">semigroup</span><span class="p">()).</span><span class="n">run</span> <span class="p">{</span>
  <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="p">+</span> <span class="n">Option</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">// Some(3)</span>
</code></pre></div></div>

<p>Contents partially adapted from <a href="https://www.scala-exercises.org/cats/semigroup">Scala Exercises Cat’s Semigroup Tutorial</a></p>

<h3 id="data-types">Data Types</h3>

<p>The following data types in Arrow provide instances that adhere to the <code class="highlighter-rouge">Semigroup</code> type class.</p>

<ul>
  <li><a href="/docs/datatypes/nonemptylist">NonEmptyList</a></li>
  <li><a href="/docs/datatypes/sequencek">SequenceK</a></li>
  <li><a href="/docs/datatypes/setk">SetK</a></li>
</ul>
