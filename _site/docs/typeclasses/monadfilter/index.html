<h2 id="monadfilter">MonadFilter</h2>

<p><code class="highlighter-rouge">MonadFilter</code> is a type class that abstracts away the option of interrupting computation if a given predicate is not satisfied.</p>

<p>All instances of <code class="highlighter-rouge">MonadFilter</code> provide syntax over their respective data types to comprehend monadically over their computation:</p>

<h2 id="continuewith">continueWith</h2>

<p>Binding over <code class="highlighter-rouge">MonadFilter</code> instances with <code class="highlighter-rouge">bindingFilter</code> brings into scope the <code class="highlighter-rouge">continueIf</code> guard that requires a <code class="highlighter-rouge">Boolean</code> predicate as value. If the predicate is <code class="highlighter-rouge">true</code> the computation will continue and if the predicate returns <code class="highlighter-rouge">false</code> the computation is short-circuited returning monad filter instance <code class="highlighter-rouge">empty()</code> value.</p>

<p>In the example below we demonstrate monadic comprehension over the <code class="highlighter-rouge">MonadFilter</code> instances for both <code class="highlighter-rouge">Option</code> and <code class="highlighter-rouge">ListK</code> since both data types can provide a safe <code class="highlighter-rouge">empty</code> value.</p>

<p>When <code class="highlighter-rouge">continueIf</code> is satisfied the computation continues</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.*</span>
<span class="k">import</span> <span class="nn">arrow.core.*</span>
<span class="k">import</span> <span class="nn">arrow.mtl.typeclasses.*</span>

<span class="n">Option</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">c</span> <span class="p">=</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
 <span class="n">continueIf</span><span class="p">(</span><span class="n">c</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
 <span class="n">c</span>
<span class="p">}</span>
<span class="c1">// Some(2)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.data.*</span>

<span class="n">ListK</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">c</span> <span class="p">=</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
 <span class="n">continueIf</span><span class="p">(</span><span class="n">c</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
 <span class="n">c</span>
<span class="p">}</span>
<span class="c1">// ListK(list=[2])</span>
</code></pre></div></div>

<p>When <code class="highlighter-rouge">continueIf</code> returns <code class="highlighter-rouge">false</code> the computation is interrupted and the <code class="highlighter-rouge">empty()</code> value is returned</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Option</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">c</span> <span class="p">=</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
 <span class="n">continueIf</span><span class="p">(</span><span class="n">c</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span>
 <span class="n">c</span>
<span class="p">}</span>
<span class="c1">// None</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ListK</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">c</span> <span class="p">=</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
 <span class="n">continueIf</span><span class="p">(</span><span class="n">c</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span>
 <span class="n">c</span>
<span class="p">}</span>
<span class="c1">// ListK(list=[])</span>
</code></pre></div></div>

<p>##bindWithFilter</p>

<p>Binding over <code class="highlighter-rouge">MonadFilter</code> instances with <code class="highlighter-rouge">bindingFilter</code> brings into scope the <code class="highlighter-rouge">bindWithFilter</code> guard that requires a <code class="highlighter-rouge">Boolean</code> predicate as value getting matched on the monad capturing inner value. If the predicate is <code class="highlighter-rouge">true</code> the computation will continue and if the predicate returns <code class="highlighter-rouge">false</code> the computation is short-circuited returning the monad filter instance <code class="highlighter-rouge">empty()</code> value.</p>

<p>When <code class="highlighter-rouge">bindWithFilter</code> is satisfied the computation continues</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Option</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bindWithFilter</span> <span class="p">{</span> <span class="n">it</span> <span class="p">==</span> <span class="n">a</span> <span class="p">}</span> <span class="c1">//continues</span>
 <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
<span class="p">}</span>
<span class="c1">// Some(2)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ListK</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bindWithFilter</span> <span class="p">{</span> <span class="n">it</span> <span class="p">==</span> <span class="n">a</span> <span class="p">}</span> <span class="c1">//continues</span>
 <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
<span class="p">}</span>
<span class="c1">// ListK(list=[2])</span>
</code></pre></div></div>

<p>When <code class="highlighter-rouge">bindWithFilter</code> returns <code class="highlighter-rouge">false</code> the computation short circuits yielding the monad’s empty value</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Option</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">bindWithFilter</span> <span class="p">{</span> <span class="n">it</span> <span class="p">==</span> <span class="n">a</span> <span class="p">}</span> <span class="c1">//short circuits because a is 0</span>
 <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
<span class="p">}</span>
<span class="c1">// None</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ListK</span><span class="p">.</span><span class="n">monadFilter</span><span class="p">().</span><span class="n">bindingFilter</span> <span class="p">{</span>
 <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bind</span><span class="p">()</span>
 <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">bindWithFilter</span> <span class="p">{</span> <span class="n">it</span> <span class="p">==</span> <span class="n">a</span> <span class="p">}</span> <span class="c1">//short circuits because a is 0</span>
 <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
<span class="p">}</span>
<span class="c1">// ListK(list=[])</span>
</code></pre></div></div>

<h3 id="data-types">Data Types</h3>

<p>The following data types in Arrow provide instances that adhere to the <code class="highlighter-rouge">MonadFilter</code> type class.</p>

<ul>
  <li><a href="/docs/datatypes/option">Option</a></li>
</ul>
