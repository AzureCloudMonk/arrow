<h2 id="syntax-dsl">Syntax DSL</h2>

<p>In some cases the full power of Optics is not required and a familiar property-like syntax to work with values of immutable structures is desired.
To avoid boilerplate Arrow can generate this property-like dsl using <code class="highlighter-rouge">@optics</code> annotation.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.domain</span>

<span class="n">@optics</span>
<span class="kd">data class</span> <span class="nc">Street</span><span class="p">(</span><span class="kd">val</span> <span class="py">number</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>
<span class="n">@optics</span>
<span class="kd">data class</span> <span class="nc">Address</span><span class="p">(</span><span class="kd">val</span> <span class="py">city</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">street</span><span class="p">:</span> <span class="n">Street</span><span class="p">)</span>
<span class="n">@optics</span>
<span class="kd">data class</span> <span class="nc">Company</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">address</span><span class="p">:</span> <span class="n">Address</span><span class="p">)</span>
<span class="n">@optics</span>
<span class="kd">data class</span> <span class="nc">Employee</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">company</span><span class="p">:</span> <span class="n">Company</span><span class="p">?)</span>
</code></pre></div></div>

<p>The DSL will be generated in a syntax sub-package of your <code class="highlighter-rouge">data class</code> and can be used by invoking <code class="highlighter-rouge">setter()</code> on an instance. i.e. for a package <code class="highlighter-rouge">com.example.domain</code> the DSL will be generated in <code class="highlighter-rouge">com.example.domain.syntax</code>.</p>

<pre><code class="language-kotlin:ank">import com.example.domain.*
import com.example.domain.syntax.*

val employee = Employee("John Doe", Company("Kategory", Address("Functional city", Street(42, "lambda street"))))

employee.setter().company.address.street.name.modify(String::toUpperCase)
</code></pre>

<h2 id="syntax-dsl-vs-optics">Syntax DSL vs Optics</h2>

<p>In contrast to regular optics the DSL is bound to a value. Lets also generate <code class="highlighter-rouge">Lens</code> and <code class="highlighter-rouge">Optional</code> for our above domain so we can compare the difference.
In above example we want to apply a function <code class="highlighter-rouge">f</code> to the <code class="highlighter-rouge">Street::name</code> of the <code class="highlighter-rouge">Company</code>â€™s <code class="highlighter-rouge">Address</code> of an <code class="highlighter-rouge">Employee</code>.</p>

<p>We can compose an <code class="highlighter-rouge">Optic</code> that achieves the same goal.</p>

<pre><code class="language-kotlin:ank">import arrow.optics.Optional

val employeesStreetName: Optional&lt;Employee, String&gt; = employeeCompany() compose companyAddress() compose addressStreet() compose streetName()
</code></pre>

<p>The result is an <code class="highlighter-rouge">Optional</code> since <code class="highlighter-rouge">Employee::company</code> is nullable. The <code class="highlighter-rouge">Optional</code> can be used to apply a function <code class="highlighter-rouge">f</code> to any <code class="highlighter-rouge">Employee</code>.</p>

<pre><code class="language-kotlin:ank">employeesStreetName.modify(employee, String::toUpperCase)
</code></pre>

<p>So while Optics are more powerful, the syntax DSL can help you write elegant and concise code.</p>
