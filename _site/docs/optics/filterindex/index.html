<h2 id="filterindex">FilterIndex</h2>

<p><code class="highlighter-rouge">FilterIndex</code> provides a <a href="/docs/optics/traversal">Traversal</a> that can focus into a structure <code class="highlighter-rouge">S</code> and get, set or modify 0 to N foci whose index <code class="highlighter-rouge">I</code> satisfies a predicate.</p>

<p>If for a structure <code class="highlighter-rouge">S</code> the foci <code class="highlighter-rouge">A</code> can be indexed by <code class="highlighter-rouge">I</code> then a <code class="highlighter-rouge">Traversal</code> can be created by <code class="highlighter-rouge">FilterIndex</code> that is filtered by a predicate on <code class="highlighter-rouge">I</code>.</p>

<p><code class="highlighter-rouge">FilterIndex</code> can easily be created given a <code class="highlighter-rouge">Traverse</code> instance and an indexing function.</p>

<pre><code class="language-kotlin:ank">import arrow.core.*
import arrow.data.*
import arrow.optics.*
import arrow.optics.typeclasses.*

val filterIndexStringByIndex = FilterIndex.fromTraverse&lt;ForListK, String&gt;({ list -&gt;
    list.fix().map {
        it toT it.length
    }
}, ListK.traverse())
</code></pre>

<p>Given a <code class="highlighter-rouge">FilterIndex</code> instance we can create a <code class="highlighter-rouge">Traversal</code> that filters out the foci that do not match the predicate.</p>

<pre><code class="language-kotlin:ank">val filter: Traversal&lt;ListKOf&lt;String&gt;, String&gt; = filterIndexStringByIndex.filter { length -&gt; length &gt; 3 }

filter.getAll(listOf("H", "He", "Hel", "Hell", "Hello").k())
</code></pre>

<p>Arrow provides <code class="highlighter-rouge">FilterIndex</code> instances for some common datatypes both in Arrow and the Kotlin stdlib that can be filtered by index, like <code class="highlighter-rouge">ListK</code> and <code class="highlighter-rouge">MapK</code>. You can look them up by calling <code class="highlighter-rouge">FilterIndex.filterIndex()</code>.</p>

<pre><code class="language-kotlin:ank">FilterIndex.filterIndex(ListK.filterIndex&lt;Int&gt;()) { index -&gt; index % 2 == 0 }
            .getAll(listOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9).k())
</code></pre>

<h3 id="instances">Instances</h3>

<p>The following datatypes in Arrow provide instances that adhere to the <code class="highlighter-rouge">FilterIndex</code> typeclass.</p>

<ul>
  <li>[String]</li>
  <li><a href="/docs/datatypes/nonemptylist">NonEmptyList</a></li>
  <li><a href="/docs/datatypes/listk">ListK</a></li>
  <li><a href="/docs/datatypes/sequencek">SequenceK</a></li>
  <li><a href="/docs/datatypes/mapk">MapK</a></li>
</ul>
