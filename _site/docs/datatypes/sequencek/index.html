<h2 id="sequencek">SequenceK</h2>

<p>SequenceK implements lazy lists representing lazily-evaluated ordered sequence of homogenous values.</p>

<p>It can be created from Kotlin Sequence type with a convenient <code class="highlighter-rouge">k()</code> function.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.*</span>
<span class="k">import</span> <span class="nn">arrow.data.*</span>

<span class="n">sequenceOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>
<span class="c1">// SequenceK(sequence=kotlin.collections.ArraysKt___ArraysKt$asSequence$$inlined$Sequence$1@4eec29a3)</span>
</code></pre></div></div>

<p>SequenceK derives many useful typeclasses. For instance, it has a <a href="/docs/typeclasses/semigroupk/"><code class="highlighter-rouge">SemigroupK</code></a> instance.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">hello</span> <span class="p">=</span> <span class="n">sequenceOf</span><span class="p">(</span><span class="sc">'h'</span><span class="p">,</span> <span class="sc">'e'</span><span class="p">,</span> <span class="sc">'l'</span><span class="p">,</span> <span class="sc">'l'</span><span class="p">,</span> <span class="sc">'o'</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">commaSpace</span> <span class="p">=</span> <span class="n">sequenceOf</span><span class="p">(</span><span class="sc">','</span><span class="p">,</span> <span class="sc">' '</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">world</span> <span class="p">=</span> <span class="n">sequenceOf</span><span class="p">(</span><span class="sc">'w'</span><span class="p">,</span> <span class="sc">'o'</span><span class="p">,</span> <span class="sc">'r'</span><span class="p">,</span> <span class="sc">'l'</span><span class="p">,</span> <span class="sc">'d'</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>

<span class="n">hello</span><span class="p">.</span><span class="n">combineK</span><span class="p">(</span><span class="n">commaSpace</span><span class="p">.</span><span class="n">combineK</span><span class="p">(</span><span class="n">world</span><span class="p">)).</span><span class="n">toList</span><span class="p">()</span> <span class="p">==</span> <span class="n">hello</span><span class="p">.</span><span class="n">combineK</span><span class="p">(</span><span class="n">commaSpace</span><span class="p">).</span><span class="n">combineK</span><span class="p">(</span><span class="n">world</span><span class="p">).</span><span class="n">toList</span><span class="p">()</span>
<span class="c1">// true</span>
</code></pre></div></div>

<p><a href="/docs/typeclasses/functor/"><code class="highlighter-rouge">Functor</code></a></p>

<p>Transforming a sequence:</p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">fibonacci</span> <span class="p">=</span> <span class="n">generateSequence</span><span class="p">(</span><span class="m">0</span> <span class="n">to</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">second</span> <span class="n">to</span> <span class="n">it</span><span class="p">.</span><span class="n">first</span> <span class="p">+</span> <span class="n">it</span><span class="p">.</span><span class="n">second</span> <span class="p">}.</span><span class="n">map</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">first</span> <span class="p">}.</span><span class="n">k</span><span class="p">()</span>
<span class="n">fibonacci</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">it</span> <span class="p">*</span> <span class="m">2</span> <span class="p">}.</span><span class="n">takeWhile</span> <span class="p">{</span> <span class="n">it</span> <span class="p">&lt;</span> <span class="m">10</span> <span class="p">}.</span><span class="n">toList</span><span class="p">()</span>
<span class="c1">// [0, 2, 2, 4, 6]</span>
</code></pre></div></div>

<p><a href="/docs/typeclasses/applicative/"><code class="highlighter-rouge">Applicative</code></a></p>

<p>Applying a sequence of functions to a sequence:</p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SequenceK</span><span class="p">.</span><span class="n">applicative</span><span class="p">().</span><span class="n">run</span> <span class="p">{</span> <span class="n">sequenceOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">ap</span><span class="p">(</span><span class="n">sequenceOf</span><span class="p">({</span> <span class="n">x</span><span class="p">:</span> <span class="n">Int</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="m">1</span><span class="p">},</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="n">Int</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="m">2</span><span class="p">}).</span><span class="n">k</span><span class="p">()).</span><span class="n">toList</span><span class="p">()</span> <span class="p">}</span>
<span class="c1">// [2, 3, 4, 2, 4, 6]</span>
</code></pre></div></div>

<p>SequenceK is a <a href="/docs/_docs/typeclasses/monad/"><code class="highlighter-rouge">Monad</code></a> too. For example, it can be used to model non-deterministic computations. (In a sense that the computations return an arbitrary number of results.)</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">arrow.typeclasses.*</span>

<span class="kd">val</span> <span class="py">positive</span> <span class="p">=</span> <span class="n">generateSequence</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="p">{</span> <span class="n">it</span> <span class="p">+</span> <span class="m">1</span> <span class="p">}.</span><span class="n">k</span><span class="p">()</span> <span class="c1">// sequence of positive numbers</span>
<span class="kd">val</span> <span class="py">positiveEven</span> <span class="p">=</span> <span class="n">positive</span><span class="p">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">it</span> <span class="p">%</span> <span class="m">2</span> <span class="p">==</span> <span class="m">0</span> <span class="p">}.</span><span class="n">k</span><span class="p">()</span>

<span class="n">SequenceK</span><span class="p">.</span><span class="n">monad</span><span class="p">().</span><span class="n">binding</span> <span class="p">{</span>
   <span class="kd">val</span> <span class="py">p</span> <span class="p">=</span> <span class="n">positive</span><span class="p">.</span><span class="n">bind</span><span class="p">()</span>
   <span class="kd">val</span> <span class="py">pe</span> <span class="p">=</span> <span class="n">positiveEven</span><span class="p">.</span><span class="n">bind</span><span class="p">()</span>
   <span class="n">p</span> <span class="p">+</span> <span class="n">pe</span>
<span class="p">}.</span><span class="n">fix</span><span class="p">().</span><span class="n">take</span><span class="p">(</span><span class="m">5</span><span class="p">).</span><span class="n">toList</span><span class="p">()</span>
<span class="c1">// [3, 5, 7, 9, 11]</span>
</code></pre></div></div>

<p>Folding a sequence,</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sequenceOf</span><span class="p">(</span><span class="sc">'a'</span><span class="p">,</span> <span class="sc">'b'</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">,</span> <span class="sc">'d'</span><span class="p">,</span> <span class="sc">'e'</span><span class="p">).</span><span class="n">k</span><span class="p">().</span><span class="n">foldLeft</span><span class="p">(</span><span class="s">""</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="n">y</span> <span class="p">}</span>
<span class="c1">// abcde</span>
</code></pre></div></div>

<h2 id="available-instances">Available Instances</h2>

<ul>
  <li><a href="/docs/typeclasses/show">Show</a></li>
  <li><a href="/docs/typeclasses/eq">Eq</a></li>
  <li><a href="/docs/typeclasses/applicative">Applicative</a></li>
  <li><a href="/docs/typeclasses/foldable">Foldable</a></li>
  <li><a href="/docs/typeclasses/functor">Functor</a></li>
  <li><a href="/docs/typeclasses/monad">Monad</a></li>
  <li><a href="/docs/typeclasses/monoid">Monoid</a></li>
  <li><a href="/docs/typeclasses/monoidk">MonoidK</a></li>
  <li><a href="/docs/typeclasses/semigroup">Semigroup</a></li>
  <li><a href="/docs/typeclasses/semigroupk">SemigroupK</a></li>
  <li><a href="/docs/typeclasses/traverse">Traverse</a></li>
  <li><a href="/docs/typeclasses/traversefilter">TraverseFilter</a></li>
  <li><a href="/docs/optics/index">Index</a></li>
  <li><a href="/docs/optics/filterindex">FilterIndex</a></li>
</ul>
